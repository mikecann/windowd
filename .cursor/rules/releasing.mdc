---
description: Release process for windowd
alwaysApply: true
---

# Releasing windowd

## Version bump + commit + tag

1. Bump `version` in `package.json`
2. Commit: `git add bin/cli.ts package.json ... && git commit -m "Release vX.Y.Z."`
3. Tag: `git tag vX.Y.Z`
4. Push: `git push origin main --tags`

## npm publish

Publishing is handled automatically by the **npm Trusted Publisher** (OIDC) flow - pushing the tag triggers it via CI. Do NOT run `npm publish` manually.

The workflow uses `--provenance` with `permissions: id-token: write`. No secrets are needed in the repo.

Requirements for the workflow:
- `npm install -g npm@latest` step BEFORE publishing - the runner's bundled npm is too old to handle OIDC auth
- `registry-url: 'https://registry.npmjs.org'` in `setup-node` so npm knows the registry
- `repository.url` in `package.json` pointing to the GitHub repo - provenance verification requires it
- No `NODE_AUTH_TOKEN` secret needed in the repo

## Versioning guide

- Patch (0.x.Y): bug fixes only
- Minor (0.X.0): new features or meaningful UX improvements
- The project is pre-1.0 so minor bumps are fine for anything non-trivial
